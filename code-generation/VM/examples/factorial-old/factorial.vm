push constant 5
call factorial.fac 1

goto end


function fac 1
    push argument 0
    push constant 1
    lte
    if-goto end
    push argument 0
    push argument 0
    push constant 1
    sub
    call factorial.fac 1
    call factorial.mult 2
    goto result

    label end
    push constant 1

    label result
    return

function mult 2
    // x
    push argument 0
    pop temp 0

    // y
    push argument 1
    pop temp 1

    // sum
    push constant 0
    pop temp 2

    // i
    push constant 0
    pop temp 3


    label LOOP
    push temp 3
    push temp 1
    gte
    if-goto END
        // increment sum
        push temp 0
        push temp 2
        add
        pop temp 2

        // increment i
        push temp 3
        push constant 1
        add
        pop temp 3

        goto LOOP

    label END
    push temp 2
    return
label end
